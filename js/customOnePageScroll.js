$(document).ready(function(){var aChildren=$(".nav-links a");var gap=$("header").outerHeight()-2;var aArray=[];for(var i=0;i<aChildren.length;i++){var aChild=aChildren[i];if(!$(aChild).hasClass('extLink')){if($(aChild).attr('rel')){var ahref=$(aChild).attr('rel');aArray.push(ahref);}}}$(window).scroll(function(){var windowPos=$(window).scrollTop();var windowHeight=$(window).height();var docHeight=$(document).height();for(i=0;i<aArray.length;i++){var theID=aArray[i];var divPos=$("#"+theID).offset().top;var divHeight=$("#"+theID).outerHeight();if(windowPos>=(divPos-gap)&&windowPos<((divPos-gap)+divHeight)){$("a[rel='"+theID+"']").addClass("active");}else{$("a[rel='"+theID+"']").removeClass("active");}}if(windowPos+windowHeight==docHeight){if(!$(".nav-links a:last-child").hasClass("active")){var navActiveCurrent=$(".active").attr("rel");$(".nav-links a").removeClass("active");$(".nav-links a:last-child").addClass("active");}}});$('.nav-links a').on("click",function(){if(!$(this).hasClass('extLink')){var href=$(this).attr("rel");var gap=$("header").outerHeight()-18;$('html,body').animate({scrollTop:$("#"+href).offset().top-gap},1000);}});});